# 移除频道存储的简化提案

## Why

当前应用在首页面填写频道ID后，会创建频道记录并存储到IndexedDB中，然后跳转到画板页面。这种设计存在以下问题：

1. **过度存储**: 频道ID实际上只需要在URL中传递，不需要在本地数据库中存储
2. **复杂验证**: 画板页面需要验证频道是否存在于数据库中，增加了不必要的复杂性
3. **权限检查**: 当前需要验证频道是否属于当前用户，但实际使用场景中频道应该是开放共享的
4. **存储开销**: 为每个频道创建数据库记录，增加了存储和管理的开销

移除频道存储可以大幅简化代码结构，提升性能，并让频道访问更加开放便捷。

## What Changes

1. **移除频道数据服务**: 删除 `ChannelDataService` 和相关的IndexedDB表
2. **简化首页面**: 移除频道创建逻辑，直接跳转到URL
3. **简化画板页面**: 移除频道数据库验证，只保留用户登录验证
4. **更新类型定义**: 移除 `Channel` 接口和相关类型
5. **更新状态管理**: 移除 `useChannelStore`，简化为只管理用户状态
6. **更新测试套件**: 移除频道相关测试，确保功能正常

## 建议的解决方案

**核心理念**: 频道ID只在URL中传递，作为画板的标识符，不在本地存储任何频道相关信息。

### 简化后的流程

1. **首页面**: 用户填写用户名和频道ID → 创建用户 → 直接跳转到 `/board/{channelId}`
2. **画板页面**: 验证用户登录状态 → 验证频道ID格式 → 直接显示画板，无需频道数据库验证
3. **频道共享**: 任何知道频道ID的用户都可以访问，无需权限验证

### 实现策略

1. **移除频道数据服务**: 删除 `ChannelDataService` 和相关的IndexedDB表
2. **简化首页面**: 移除频道创建逻辑，直接跳转到URL
3. **简化画板页面**: 移除频道数据库验证，只保留用户登录验证
4. **更新类型定义**: 移除 `Channel` 接口和相关类型
5. **更新状态管理**: 移除 `useChannelStore`，简化为只管理用户状态

## 预期收益

- **代码简化**: 减少约50%的频道相关代码
- **性能提升**: 消除频道数据库操作，提升页面加载速度
- **用户体验**: 频道访问更加开放和便捷
- **维护成本**: 减少数据模型复杂性，降低维护难度

## 风险评估

- **低风险**: 主要是删除功能，不涉及核心业务逻辑变更
- **兼容性**: 需要确保现有画板功能正常工作
- **数据迁移**: 现有频道数据可以安全删除，因为频道ID只在URL中使用

## 验收标准

1. ✅ 首页面不再创建频道记录，直接跳转到 `/board/{channelId}`
2. ✅ 画板页面只验证用户登录状态和频道ID格式
3. ✅ 移除所有频道相关的IndexedDB存储
4. ✅ 删除 `ChannelDataService`、`useChannelStore` 和相关文件
5. ✅ 更新测试用例，移除频道存储相关的测试
6. ✅ 现有画板功能保持正常工作
