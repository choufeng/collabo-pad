## MODIFIED Requirements

### Requirement: 基于坐标的主题位置管理

系统 SHALL 支持基于用户指定坐标的主题位置管理，在界面初始化时保持用户指定的精确位置。

#### Scenario: 已有坐标主题的位置保护

- **WHEN** 界面初始化加载包含坐标的主题时
- **THEN** 系统必须保持主题的原始 x,y 坐标位置
- **AND** 位置优化算法不得覆盖已有坐标的主题
- **AND** 坐标验证失败时不应影响其他主题的位置计算
- **AND** 多次界面刷新时坐标位置保持稳定

#### Scenario: 混合坐标场景的位置处理

- **WHEN** 界面同时包含有坐标和无坐标的主题时
- **THEN** 系统必须对有坐标主题保持原始位置
- **AND** 必须对无坐标主题进行自动位置优化
- **AND** 自动优化时避免与有坐标主题发生重叠
- **AND** 确保所有主题都在可见区域内合理分布

#### Scenario: 坐标位置的数据一致性

- **WHEN** 通过 SSE 接收主题更新时
- **THEN** 系统必须保持更新后主题的坐标位置
- **AND** 坐标信息缺失时才启用位置重新计算
- **AND** 坐标精度必须保持到像素级别
- **AND** 位置更新不应影响其他主题的布局

### Requirement: 位置优化算法的坐标感知

系统 SHALL 提供坐标感知的节点位置优化算法，能够识别并保护已有坐标的主题。

#### Scenario: 坐标检测和分类处理

- **WHEN** 执行节点位置优化时
- **THEN** 算法必须检测每个主题是否包含有效坐标
- **AND** 必须将有坐标主题和无坐标主题分别处理
- **AND** 有坐标主题跳过位置重新计算
- **AND** 无坐标主题按层级和空间关系进行布局

#### Scenario: 空间冲突避免

- **WHEN** 为无坐标主题计算位置时
- **THEN** 算法必须检测与已有坐标主题的空间冲突
- **AND** 自动调整位置避免节点重叠
- **AND** 保持主题间的视觉层次关系
- **AND** 优化后的位置应该符合用户直觉
