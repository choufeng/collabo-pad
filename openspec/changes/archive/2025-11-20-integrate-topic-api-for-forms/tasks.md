## 1. 环境准备和测试设置

- [x] 1.1 分析现有测试结构和覆盖率要求
- [x] 1.2 创建API调用相关的测试工具函数
- [x] 1.3 设置Mock API响应的测试环境

## 2. API集成测试编写（TDD - 红阶段）

- [ ] 2.1 编写add topic表单API调用失败的测试用例
- [ ] 2.2 编写add topic表单API调用成功的测试用例
- [ ] 2.3 编写add child topic表单API调用失败的测试用例
- [ ] 2.4 编写add child topic表单API调用成功的测试用例
- [ ] 2.5 编写API错误处理和用户反馈的测试用例
- [ ] 2.6 确保所有新测试运行失败（红阶段）

## 3. API集成实现（TDD - 绿阶段）

- [ ] 3.1 重构NodeEditor.tsx的handleSaveNode函数，调用API而不是本地创建
- [ ] 3.2 重构Board.tsx的handleCreateChildNode函数，调用API而不是本地创建
- [ ] 3.3 重构TopicDetailsDisplay.tsx的子节点创建逻辑
- [ ] 3.4 实现API调用成功后的界面更新逻辑（监听SSE事件）
- [ ] 3.5 实现API调用失败时的错误处理和用户反馈
- [ ] 3.6 移除不再需要的本地节点创建代码

## 4. 测试验证和覆盖率检查（TDD - 重构阶段）

- [ ] 4.1 确保所有新测试通过（绿阶段）
- [ ] 4.2 运行测试覆盖率检查，确保达到90%以上要求
- [ ] 4.3 重构代码，优化API调用逻辑和错误处理
- [ ] 4.4 验证重构后所有测试仍然通过

## 5. 集成测试和验证

- [ ] 5.1 测试完整的add topic流程（UI -> API -> SSE -> UI更新）
- [ ] 5.2 测试完整的add child topic流程（UI -> API -> SSE -> UI更新）
- [ ] 5.3 测试网络错误和API异常情况下的用户体验
- [ ] 5.4 验证表单验证逻辑保持正常工作
- [ ] 5.5 测试并发提交和数据一致性

## 6. 清理和文档

- [ ] 6.1 移除不再使用的本地创建函数和工具代码
- [ ] 6.2 更新组件注释和类型定义
- [ ] 6.3 清理导入语句和无用代码
- [ ] 6.4 运行完整的linting和格式化检查
