## 1. 分析和修复连接线创建逻辑

- [x] 1.1 分析当前 topic-to-node.ts 中的连接线创建问题
- [x] 1.2 对比 node-hierarchy.ts 中的连接线样式实现
- [x] 1.3 确定需要统一的地方

## 2. 实现递归层级计算

- [x] 2.1 修复 calculateNodeLevel 函数，支持真正的递归计算
- [x] 2.2 处理循环引用检测
- [x] 2.3 添加层级计算的单元测试

## 3. 统一连接线样式

- [x] 3.1 在 topic-to-node.ts 中使用 node-hierarchy.ts 的样式函数
- [x] 3.2 为 SSE 数据创建的连接线添加动画效果
- [x] 3.3 确保手动创建和 SSE 数据的连接线样式一致

## 4. 优化节点布局

- [x] 4.1 改进多层节点的位置计算算法
- [x] 4.2 避免连接线交叉和重叠
- [x] 4.3 添加连接线路径优化逻辑

## 5. 测试和验证

- [x] 5.1 创建多层嵌套结构的测试用例
- [x] 5.2 验证 SSE 数据加载时的连接线显示
- [x] 5.3 验证手动创建子节点时的连接线显示
- [x] 5.4 测试连接线的交互效果（悬停、点击等）
